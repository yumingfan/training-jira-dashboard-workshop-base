# US-001 Sprint ç‡ƒç›¡åœ–è¦–è¦ºåŒ– - å¯¦ä½œä»»å‹™æ¸…å–®

> **æª”æ¡ˆç·¨è™Ÿ**: TASK-001-sprint-burndown-implementation  
> **å»ºç«‹æ—¥æœŸ**: 2025-08-18  
> **æœ€å¾Œæ›´æ–°**: 2025-08-18  
> **ç‹€æ…‹**: é€²è¡Œä¸­  
> **å°æ‡‰ User Story**: [US-001](./spec01-us01-sprintprogress.md#us-001-sprint-ç‡ƒç›¡åœ–è¦–è¦ºåŒ–)

## ğŸ“‹ ä»»å‹™ç¸½è¦½

åŸºæ–¼ç¢ºèªçš„æŠ€è¡“æ–¹æ¡ˆï¼Œä»¥ä¸‹æ˜¯å®Œæ•´çš„å¯¦ä½œä»»å‹™æ¸…å–®ï¼š

### âœ… **å·²ç¢ºèªçš„æŠ€è¡“éœ€æ±‚**
- **è³‡æ–™ä¾†æº**: å¾ç¾æœ‰ `rawData` è¨ˆç®— Sprint ç‡ƒç›¡æ•¸æ“š
- **é é¢å¸ƒå±€**: æ”¾åœ¨ Issue Status Distribution æ­£ä¸‹æ–¹
- **Sprint é¸æ“‡**: è¤‡ç”¨ç¾æœ‰çš„ Sprint ç¯©é¸å™¨
- **æ™‚é–“è¨ˆç®—**: æ’é™¤é€±æœ«ï¼Œè®€å– `GetJiraSprintValues` çš„ startDate/endDate
- **é–‹ç™¼å„ªå…ˆç´š**: å®Œæˆç‡ â†’ ç‡ƒç›¡åœ– â†’ è‰²å½©è­¦ç¤º

---

## ğŸ—ï¸ Phase 1: å¾Œç«¯è³‡æ–™å±¤å¯¦ä½œ

### Task 1.1: å»ºç«‹è³‡æ–™æ¨¡å‹ ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: å»ºç«‹ Sprint ç‡ƒç›¡åœ–æ‰€éœ€çš„è³‡æ–™æ¨¡å‹

**æŠ€è¡“ç´°ç¯€**:
```csharp
// éœ€è¦å»ºç«‹çš„è³‡æ–™æ¨¡å‹
public class SprintBurndownData
{
    public string SprintName { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int TotalStoryPoints { get; set; }
    public int CompletedStoryPoints { get; set; }
    public int CurrentWorkingDay { get; set; }
    public int TotalWorkingDays { get; set; }
    public double CompletionRate { get; set; }
    public ProgressStatus HealthStatus { get; set; }
    public List<DailyProgress> DailyProgress { get; set; }
}

public class DailyProgress
{
    public DateTime Date { get; set; }
    public int WorkingDay { get; set; }
    public int CompletedStoryPoints { get; set; }
    public int RemainingStoryPoints { get; set; }
    public int IdealRemaining { get; set; }
}

public enum ProgressStatus
{
    Normal,   // ç¶ è‰²
    Warning,  // é»ƒè‰²  
    Danger    // ç´…è‰²
}
```

**é©—æ”¶æ¨™æº–**:
- [x] å»ºç«‹å®Œæ•´çš„è³‡æ–™æ¨¡å‹é¡åˆ¥
- [x] å®šç¾© ProgressStatus æšèˆ‰
- [x] ç¢ºä¿æ‰€æœ‰å±¬æ€§ç¬¦åˆ AC éœ€æ±‚

---

### Task 1.2: å¯¦ä½œå·¥ä½œæ—¥è¨ˆç®—é‚è¼¯ ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: å¯¦ä½œæ’é™¤é€±æœ«çš„å·¥ä½œæ—¥è¨ˆç®—åŠŸèƒ½

**æŠ€è¡“ç´°ç¯€**:
```csharp
public static class WorkingDayCalculator
{
    public static int CalculateWorkingDays(DateTime startDate, DateTime endDate)
    {
        // æ’é™¤é€±å…­ã€é€±æ—¥çš„å·¥ä½œæ—¥è¨ˆç®—
    }
    
    public static int GetCurrentWorkingDay(DateTime sprintStart, DateTime currentDate)
    {
        // è¨ˆç®—ç•¶å‰æ˜¯ Sprint çš„ç¬¬å¹¾å€‹å·¥ä½œæ—¥
    }
}
```

**è³‡æ–™ä¾†æº**:
- `GetJiraSprintValues` è¡¨çš„ startDate (Column F) å’Œ endDate (Column G)
- æŒ‰ç…§ table-schema.md çš„æ¬„ä½å®šç¾©ï¼šF æ˜¯ startDateï¼ŒG æ˜¯ endDate

**é©—æ”¶æ¨™æº–**:
- [x] æ­£ç¢ºæ’é™¤é€±æœ«ï¼ˆé€±å…­ã€æ—¥ï¼‰
- [x] è™•ç†è·¨æœˆä»½çš„æ—¥æœŸè¨ˆç®—
- [x] è¿”å›æº–ç¢ºçš„å·¥ä½œæ—¥æ•¸é‡

---

### Task 1.3: æ“´å±• GoogleSheetsService ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 1 å¤©  
**æè¿°**: æ–°å¢ Sprint ç‡ƒç›¡æ•¸æ“šçš„è®€å–å’Œè¨ˆç®—åŠŸèƒ½

**è³‡æ–™æ¬„ä½å°æ‡‰**:
- `rawData` è¡¨ï¼š
  - Sprint æ¬„ä½ï¼šç´¢å¼• 6 (Column G)
  - Story Points æ¬„ä½ï¼šç´¢å¼• 15 (Column P)
  - Status æ¬„ä½ï¼šç´¢å¼• 5 (Column F)
  - Resolved æ¬„ä½ï¼šç´¢å¼• 21 (Column V)
- `GetJiraSprintValues` è¡¨ï¼š
  - Sprint Name æ¬„ä½ï¼šç´¢å¼• 2 (Column C)
  - startDate æ¬„ä½ï¼šç´¢å¼• 5 (Column F)
  - endDate æ¬„ä½ï¼šç´¢å¼• 6 (Column G)

**åŠŸèƒ½éœ€æ±‚**:
```csharp
public async Task<SprintBurndownData> GetSprintBurndownDataAsync(string sprintName)
{
    // 1. å¾ GetJiraSprintValues å–å¾— Sprint æ™‚é–“è³‡è¨Š
    // 2. å¾ rawData ç¯©é¸è©² Sprint çš„ Issues
    // 3. è¨ˆç®—å®Œæˆç‹€æ…‹ï¼ˆDone ç®—å·²å®Œæˆï¼‰
    // 4. è¨ˆç®—æ¯æ—¥ç‡ƒç›¡æ•¸æ“š
    // 5. è¨ˆç®—é€²åº¦å¥åº·åº¦
}
```

**é©—æ”¶æ¨™æº–**:
- [x] æ­£ç¢ºè®€å– Sprint æ™‚é–“è³‡è¨Š
- [x] æº–ç¢ºè¨ˆç®—æ•…äº‹é»æ•¸çµ±è¨ˆ
- [x] ç”Ÿæˆæ¯æ—¥ç‡ƒç›¡æ•¸æ“š
- [x] è¨ˆç®—é€²åº¦å¥åº·åº¦ï¼ˆç¶ /é»ƒ/ç´…ï¼‰

---

### Task 1.4: æ–°å¢ API ç«¯é» ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: å»ºç«‹ Sprint ç‡ƒç›¡åœ–çš„ API ç«¯é»

**API è¨­è¨ˆ**:
```csharp
[HttpGet("sprint/{sprintName}/burndown")]
public async Task<ActionResult<SprintBurndownData>> GetSprintBurndown(string sprintName)
```

**é©—æ”¶æ¨™æº–**:
- [x] API ç«¯é»æ­£å¸¸é‹ä½œ
- [x] è¿”å›æ­£ç¢ºçš„ JSON æ ¼å¼
- [x] è™•ç†éŒ¯èª¤æƒ…æ³ï¼ˆSprint ä¸å­˜åœ¨ç­‰ï¼‰
- [x] éµå¾ªç¾æœ‰çš„ API æ¨¡å¼

---

## ğŸ¨ Phase 2: å‰ç«¯çµ„ä»¶å¯¦ä½œ

### Task 2.1: å»ºç«‹å®Œæˆç‡å¡ç‰‡çµ„ä»¶ (Priority 1) ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 1 å¤©  
**æè¿°**: å¯¦ä½œ Sprint å®Œæˆç‡é¡¯ç¤ºå¡ç‰‡

**çµ„ä»¶è¨­è¨ˆ**:
```typescript
interface CompletionRateCardProps {
  sprintName: string;
  completedSP: number;
  totalSP: number;
  completionRate: number;
  healthStatus: 'normal' | 'warning' | 'danger';
}
```

**è¦–è¦ºè¦æ±‚**:
- é¡¯ç¤º Sprint åç¨±
- é€²åº¦æ¢è¦–è¦ºåŒ–ï¼ˆ65% å®Œæˆï¼‰
- æ•…äº‹é»æ•¸åˆ†è§£ï¼ˆå·²å®Œæˆ/å‰©é¤˜/ç¸½è¨ˆï¼‰
- è‰²å½©ç‹€æ…‹æŒ‡ç¤ºï¼ˆç¶ /é»ƒ/ç´…ï¼‰
- è­¦å‘Šåœ–ç¤ºï¼ˆâš ï¸/ğŸš¨ï¼‰

**é©—æ”¶æ¨™æº–**:
- [x] ç¬¦åˆ AC-001-01 çš„è¦–è¦ºæ•ˆæœ
- [x] æ­£ç¢ºçš„è‰²å½©ç‹€æ…‹é¡¯ç¤º
- [x] éŸ¿æ‡‰å¼è¨­è¨ˆ
- [x] èˆ‡ç¾æœ‰ UI é¢¨æ ¼ä¸€è‡´

---

### Task 2.2: å¯¦ä½œè³‡æ–™ Hook ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: å»ºç«‹è³‡æ–™ç²å–å’Œç‹€æ…‹ç®¡ç†çš„ Hook

**Hook è¨­è¨ˆ**:
```typescript
export const useSprintBurndown = (selectedSprint: string) => {
  // è³‡æ–™ç²å–ã€è¼‰å…¥ç‹€æ…‹ã€éŒ¯èª¤è™•ç†
  return { data, loading, error, refetch };
}
```

**é©—æ”¶æ¨™æº–**:
- [x] æ­£ç¢ºçš„ API å‘¼å«
- [x] è¼‰å…¥ç‹€æ…‹è™•ç†
- [x] éŒ¯èª¤ç‹€æ…‹è™•ç†
- [x] è³‡æ–™å¿«å–æ©Ÿåˆ¶

---

### Task 2.3: å»ºç«‹ç‡ƒç›¡åœ–çµ„ä»¶ (Priority 2) ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 1.5 å¤©  
**æè¿°**: ä½¿ç”¨ Recharts å¯¦ä½œ Sprint ç‡ƒç›¡åœ–

**åœ–è¡¨éœ€æ±‚**:
- ç†æƒ³ç‡ƒç›¡ç·šï¼ˆè™›ç·šï¼Œç°è‰²ï¼‰
- å¯¦éš›ç‡ƒç›¡ç·šï¼ˆå¯¦ç·šï¼Œä¾å¥åº·åº¦è®Šè‰²ï¼‰
- X è»¸ï¼šå·¥ä½œæ—¥ï¼ˆDay 1, Day 2...ï¼‰
- Y è»¸ï¼šå‰©é¤˜æ•…äº‹é»æ•¸
- Tooltip é¡¯ç¤ºè©³ç´°è³‡è¨Š

**è‰²å½©ç³»çµ±**:
- æ­£å¸¸ï¼šç¶ è‰² (#10b981)
- è­¦ç¤ºï¼šé»ƒè‰² (#f59e0b)
- å±éšªï¼šç´…è‰² (#ef4444)

**é©—æ”¶æ¨™æº–**:
- [x] æ­£ç¢ºçš„é›™ç·šé¡¯ç¤º
- [x] ä¾å¥åº·åº¦è®Šè‰²
- [x] äº’å‹•åŠŸèƒ½æ­£å¸¸
- [x] éŸ¿æ‡‰å¼è¨­è¨ˆ

---

### Task 2.4: å»ºç«‹ä¸»å®¹å™¨çµ„ä»¶ ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: æ•´åˆæ‰€æœ‰å­çµ„ä»¶çš„ä¸»å®¹å™¨

**çµ„ä»¶æ¶æ§‹**:
```
SprintBurndownContainer
â”œâ”€â”€ CompletionRateCard
â””â”€â”€ BurndownChart
```

**é©—æ”¶æ¨™æº–**:
- [x] æ­£ç¢ºçš„è³‡æ–™å‚³é
- [x] çµ±ä¸€çš„è¼‰å…¥å’ŒéŒ¯èª¤ç‹€æ…‹
- [x] è‰¯å¥½çš„å¸ƒå±€é–“è·

---

## ğŸ”— Phase 3: æ•´åˆèˆ‡æ¸¬è©¦

### Task 3.1: æ•´åˆåˆ°ä¸»å„€è¡¨æ¿ ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: å°‡ç‡ƒç›¡åœ–çµ„ä»¶åŠ å…¥ç¾æœ‰å„€è¡¨æ¿é é¢

**æ•´åˆä½ç½®**:
- æ”¾åœ¨ Issue Status Distribution çµ„ä»¶æ­£ä¸‹æ–¹
- è¤‡ç”¨ç¾æœ‰çš„ Sprint ç¯©é¸å™¨

**é©—æ”¶æ¨™æº–**:
- [x] æ­£ç¢ºçš„é é¢å¸ƒå±€
- [x] èˆ‡ç¾æœ‰ç¯©é¸å™¨åŒæ­¥
- [x] ä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½

---

### Task 3.2: é€²åº¦å¥åº·åº¦æ¸¬è©¦ ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: æ¸¬è©¦å„ç¨®é€²åº¦ç‹€æ³çš„è‰²å½©è­¦ç¤º

**æ¸¬è©¦å ´æ™¯**:
- æ­£å¸¸é€²åº¦ï¼ˆç¶ è‰²ï¼‰
- è­¦ç¤ºç‹€æ…‹ï¼ˆé»ƒè‰²ï¼Œè½å¾Œ 10-20%ï¼‰
- å±éšªç‹€æ…‹ï¼ˆç´…è‰²ï¼Œè½å¾Œ >20%ï¼‰
- é‚Šç•Œå€¼æ¸¬è©¦ï¼ˆ9%, 10%, 19%, 20%, 21%ï¼‰

**é©—æ”¶æ¨™æº–**:
- [x] æ‰€æœ‰ AC å ´æ™¯é€šé
- [x] é‚Šç•Œå€¼æ­£ç¢ºè™•ç†
- [x] è¦–è¦ºæ•ˆæœç¬¦åˆè¨­è¨ˆ

---

### Task 3.3: éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦ ğŸ”„
**ç‹€æ…‹**: æº–å‚™é–‹å§‹  
**ä¼°æ™‚**: 0.5 å¤©  
**æè¿°**: ç¢ºä¿åœ¨ä¸åŒè£ç½®ä¸Šçš„é¡¯ç¤ºæ•ˆæœ

**æ¸¬è©¦ç¯„åœ**:
- æ¡Œé¢ç€è¦½å™¨ (>1024px)
- å¹³æ¿è£ç½® (768-1024px)  
- æ‰‹æ©Ÿè£ç½® (<768px)

**é©—æ”¶æ¨™æº–**:
- [x] ç¬¦åˆ AC-001-07 çš„éŸ¿æ‡‰å¼éœ€æ±‚
- [x] æ‰€æœ‰å…ƒç´ å¯æ­£å¸¸æ“ä½œ
- [x] æ–‡å­—æ¸…æ™°å¯è®€

---

## ğŸ“Š é€²åº¦å¥åº·åº¦è¨ˆç®—é‚è¼¯

### è¨ˆç®—å…¬å¼
```typescript
function calculateProgressHealth(completionRate: number, timeProgressRate: number): ProgressStatus {
  const progressDiff = timeProgressRate - completionRate;
  
  if (progressDiff < 10) return 'normal';    // ç¶ è‰²ï¼šæ­£å¸¸æˆ–è¶…å‰
  if (progressDiff < 20) return 'warning';   // é»ƒè‰²ï¼šç¨å¾®è½å¾Œ
  return 'danger';                           // ç´…è‰²ï¼šåš´é‡è½å¾Œ
}
```

### å®Œæˆç‹€æ…‹å®šç¾©
åŸºæ–¼ `rawData` è¡¨çš„ Status æ¬„ä½ï¼ˆç´¢å¼• 5ï¼‰ï¼Œä»¥ä¸‹ç‹€æ…‹è¦–ç‚ºã€Œå·²å®Œæˆã€ï¼š
- `Done`

å…¶ä»–ç‹€æ…‹è¦–ç‚ºã€Œé€²è¡Œä¸­ã€æˆ–ã€Œæœªé–‹å§‹ã€ã€‚

---

## ğŸ“ å¯¦ä½œæª¢æŸ¥æ¸…å–®

### Backend æª¢æŸ¥é …ç›®
- [ ] Task 1.1: è³‡æ–™æ¨¡å‹å»ºç«‹å®Œæˆ
- [ ] Task 1.2: å·¥ä½œæ—¥è¨ˆç®—é‚è¼¯å¯¦ä½œ
- [ ] Task 1.3: GoogleSheetsService æ“´å±•
- [ ] Task 1.4: API ç«¯é»å»ºç«‹
- [ ] API æ¸¬è©¦é€šé

### Frontend æª¢æŸ¥é …ç›®
- [ ] Task 2.1: å®Œæˆç‡å¡ç‰‡çµ„ä»¶
- [ ] Task 2.2: è³‡æ–™ Hook å¯¦ä½œ
- [ ] Task 2.3: ç‡ƒç›¡åœ–çµ„ä»¶
- [ ] Task 2.4: ä¸»å®¹å™¨çµ„ä»¶
- [ ] çµ„ä»¶å–®å…ƒæ¸¬è©¦é€šé

### Integration æª¢æŸ¥é …ç›®
- [ ] Task 3.1: ä¸»å„€è¡¨æ¿æ•´åˆ
- [ ] Task 3.2: é€²åº¦å¥åº·åº¦æ¸¬è©¦
- [ ] Task 3.3: éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦
- [ ] æ‰€æœ‰ AC å ´æ™¯é©—è­‰é€šé

---

## ğŸš€ å¯¦ä½œæ’ç¨‹

### Week 1 (ç›®æ¨™ï¼šå®Œæˆç‡åŠŸèƒ½ä¸Šç·š)
- **Day 1**: Task 1.1 + 1.2 (å¾Œç«¯åŸºç¤)
- **Day 2**: Task 1.3 + 1.4 (API å®Œæˆ)
- **Day 3**: Task 2.1 + 2.2 (å®Œæˆç‡å¡ç‰‡)
- **Day 4**: Task 3.1 (æ•´åˆæ¸¬è©¦)
- **Day 5**: æ¸¬è©¦èˆ‡å„ªåŒ–

### Week 2 (ç›®æ¨™ï¼šç‡ƒç›¡åœ–åŠŸèƒ½ä¸Šç·š)
- **Day 1-2**: Task 2.3 (ç‡ƒç›¡åœ–çµ„ä»¶)
- **Day 3**: Task 2.4 (ä¸»å®¹å™¨æ•´åˆ)
- **Day 4**: Task 3.2 + 3.3 (å…¨é¢æ¸¬è©¦)
- **Day 5**: æ–‡ä»¶æ›´æ–°èˆ‡éƒ¨ç½²

---

## ğŸ“ æŠ€è¡“æ”¯æ´è¯çµ¡

é‡åˆ°å•é¡Œæ™‚çš„è™•ç†æµç¨‹ï¼š
1. æª¢æŸ¥ table-schema.md ç¢ºèªè³‡æ–™æ¬„ä½
2. åƒè€ƒç¾æœ‰çš„ GoogleSheetsService å¯¦ä½œæ¨¡å¼
3. ç¢ºä¿ç¬¦åˆæ‰€æœ‰ AC å’Œæ¸¬è©¦æ¡ˆä¾‹è¦æ±‚

## ğŸ“ è®Šæ›´è¨˜éŒ„

| æ—¥æœŸ       | ç‰ˆæœ¬ | è®Šæ›´å…§å®¹ | ç‹€æ…‹ |
| ---------- | ---- | -------- | ---- |
| 2025-08-18 | 1.0  | åˆç‰ˆä»»å‹™æ¸…å–®å»ºç«‹ï¼Œæº–å‚™é–‹å§‹å¯¦ä½œ | ğŸ”„ é€²è¡Œä¸­ |
